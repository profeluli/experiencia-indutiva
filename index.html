<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>O Mist√©rio da Fazenda Solar - CSI Estat√≠stico</title>
    <link rel="stylesheet" href="style.css">
    </head>
<body>
    <div class="score-board">
        <h3>üèÜ Placar Detetive</h3>
        <div class="score-item">
            <span>Pontos:</span>
            <span id="score">0</span>
        </div>
        <div class="score-item">
            <span>Dicas:</span>
            <span id="hints-used">0</span>
        </div>
        <div class="score-item">
            <span>Tempo:</span>
            <span id="timer">--:--</span>
        </div>
        <div class="progress-bar">
            <div class="progress-fill" id="progress"></div>
            <div class="progress-text" id="progress-text">0%</div>
        </div>
        <div style="margin-top: 10px; font-size: 0.9em; color: #ccc;">
            Miss√µes: <span id="missions-status">0/3</span>
        </div>
    </div>

    <div class="game-container">
        <div class="header">
            <h1>üïµÔ∏è O MIST√âRIO DA FAZENDA SOLAR</h1>
            <div class="detective-badge">DETETIVE ESTAT√çSTICO</div>
            <p>Use estimativas indutivas para descobrir a verdade sobre a produ√ß√£o solar!</p>
            <div class="timer" id="game-timer">
                ‚è±Ô∏è Tempo decorrido: <span id="elapsed-time">00:00</span>
            </div>
        </div>

        <div class="evidence-section">
            <div class="evidence-card" onclick="highlightEvidence(this)">
                <h3>üìä Evid√™ncia #1: Produ√ß√£o Mensal</h3>
                <ul>
                    <li><strong>Janeiro:</strong> 12.500 kWh</li>
                    <li><strong>Mar√ßo:</strong> 11.200 kWh</li>
                    <li><strong>Maio:</strong> 9.900 kWh</li>
                    <li><strong>Julho:</strong> 8.600 kWh</li>
                </ul>
                <small style="color: #FFD700;">üìù Clique para destacar esta evid√™ncia</small>
            </div>

            <div class="evidence-card" onclick="highlightEvidence(this)">
                <h3>üë§ Evid√™ncia #2: Depoimento</h3>
                <p><em>"Notei que alguns pain√©is est√£o ficando emba√ßados ao longo do tempo. Parece ac√∫mulo de sujeira, mas n√£o temos registros de limpeza."</em></p>
                <p><strong>- T√©cnico Jo√£o Silva</strong></p>
            </div>

            <div class="evidence-card" onclick="highlightEvidence(this)">
                <h3>üì∏ Evid√™ncia #3: Dados T√©cnicos</h3>
                <ul>
                    <li><strong>Total de pain√©is:</strong> 500 unidades</li>
                    <li><strong>Capacidade por painel:</strong> 300W</li>
                    <li><strong>Instala√ß√£o:</strong> Dezembro 2023</li>
                </ul>
            </div>

            <div class="evidence-card" onclick="highlightEvidence(this)">
                <h3>üìò Evid√™ncia #4: Manual T√©cnico</h3>
                <p><em>"Efici√™ncia pode reduzir 1-3% ao m√™s sem manuten√ß√£o adequada devido ao ac√∫mulo de poeira e detritos."</em></p>
            </div>
        </div>

        <div class="missions-container">
            <h2>üéØ MISS√ïES DO DETETIVE</h2>
            
            <div class="mission" id="mission1">
                <h4>
                    <div class="status-icon status-pending" id="status1">1</div>
                    Miss√£o 1: An√°lise de Tend√™ncia (30 pontos)
                </h4>
                <p>Analise os dados de produ√ß√£o e calcule a taxa de redu√ß√£o mensal:</p>
                
                <div class="calculator">
                    <h5>üßÆ Calculadora de Varia√ß√£o</h5>
                    <div class="calc-row">
                        Janeiro ‚Üí Mar√ßo: (12.500 - 11.200) / 12.500 √ó 100 = <strong>10,4%</strong> em 2 meses
                    </div>
                    <div class="calc-row">
                        Taxa mensal m√©dia: 10,4% √∑ 2 = <strong>5,2%</strong>
                    </div>
                </div>
                
                <div class="input-group">
                    <label>Taxa de redu√ß√£o mensal (%):</label>
                    <input type="number" id="reduction-rate" placeholder="Ex: 5.2" step="0.1" min="0" max="20">
                    <div class="input-feedback" id="feedback1"></div>
                </div>
                
                <div class="input-group">
                    <label>Explique seu m√©todo de c√°lculo:</label>
                    <textarea id="calculation-method" placeholder="Descreva como voc√™ calculou..." rows="3"></textarea>
                </div>
                
                <button class="btn hint-btn" onclick="showHint(1)">üí° Dica (-5 pontos)</button>
                <button class="btn" onclick="checkMission1()" id="check1">Verificar Resposta</button>
                
                <div id="hint1" class="hint-box">
                    <strong>üí° Dica:</strong> Compare Janeiro (12.500) com Mar√ßo (11.200). A diferen√ßa √© 1.300 kWh em 2 meses. Calcule o percentual de redu√ß√£o!
                </div>
            </div>

            <div class="mission locked" id="mission2">
                <h4>
                    <div class="status-icon status-locked" id="status2">üîí</div>
                    Miss√£o 2: Predi√ß√£o de Valores (40 pontos)
                </h4>
                <p>Use o padr√£o identificado para estimar produ√ß√µes futuras:</p>
                
                <div class="input-group">
                    <label>Produ√ß√£o estimada em Setembro (kWh):</label>
                    <input type="number" id="september-estimate" placeholder="Ex: 7500" disabled>
                    <div class="input-feedback" id="feedback2a"></div>
                </div>
                
                <div class="input-group">
                    <label>Produ√ß√£o estimada em Novembro (kWh):</label>
                    <input type="number" id="november-estimate" placeholder="Ex: 6200" disabled>
                    <div class="input-feedback" id="feedback2b"></div>
                </div>
                
                <div class="calculator" style="display: none;" id="calc2">
                    <h5>üßÆ C√°lculo Assistido</h5>
                    <div class="calc-row">
                        Julho: 8.600 kWh
                    </div>
                    <div class="calc-row">
                        Setembro (2 meses depois): 8.600 √ó (1 - <span id="rate-display">5.2</span>%)¬≤ = <span id="sept-calc">7.743</span> kWh
                    </div>
                    <div class="calc-row">
                        Novembro (4 meses depois): 8.600 √ó (1 - <span id="rate-display2">5.2</span>%)‚Å¥ = <span id="nov-calc">6.970</span> kWh
                    </div>
                </div>
                
                <button class="btn hint-btn" onclick="showHint(2)" disabled>üí° Dica (-5 pontos)</button>
                <button class="btn" onclick="checkMission2()" id="check2" disabled>Verificar Resposta</button>
                
                <div id="hint2" class="hint-box">
                    <strong>üí° Dica:</strong> Se a redu√ß√£o √© de X% por m√™s, aplique essa taxa a partir de Julho (8.600 kWh). Setembro = Julho √ó (1-X%)¬≤
                </div>
            </div>

            <div class="mission locked" id="mission3">
                <h4>
                    <div class="status-icon status-locked" id="status3">üîí</div>
                    Miss√£o 3: Diagn√≥stico do Mist√©rio (30 pontos)
                </h4>
                <p>Com base em todas as evid√™ncias, resolva o mist√©rio:</p>
                
                <div class="input-group">
                    <label>Causa principal da redu√ß√£o:</label>
                    <select id="diagnosis" disabled>
                        <option value="">Selecione sua conclus√£o...</option>
                        <option value="sabotage">Sabotagem intencional contra a empresa</option>
                        <option value="maintenance">Falta de manuten√ß√£o (ac√∫mulo de sujeira)</option>
                        <option value="equipment">Defeito progressivo nos equipamentos</option>
                        <option value="weather">Mudan√ßas nas condi√ß√µes clim√°ticas</option>
                        <option value="aging">Envelhecimento natural dos pain√©is</option>
                    </select>
                    <div class="input-feedback" id="feedback3"></div>
                </div>
                
                <div class="input-group">
                    <label>Sua recomenda√ß√£o para o Sr. Martinez:</label>
                    <textarea id="recommendation" placeholder="Que a√ß√µes espec√≠ficas voc√™ sugere?" rows="4" disabled></textarea>
                </div>
                
                <button class="btn hint-btn" onclick="showHint(3)" disabled>üí° Dica (-5 pontos)</button>
                <button class="btn" onclick="checkMission3()" id="check3" disabled>Verificar Diagn√≥stico</button>
                
                <div id="hint3" class="hint-box">
                    <strong>üí° Dica:</strong> Considere: a redu√ß√£o √© constante (~5% m√™s), o t√©cnico mencionou sujeira, e o manual fala sobre 1-3% de perda mensal. Que conclus√£o voc√™ tira?
                </div>
            </div>
        </div>

        <div style="text-align: center; margin-top: 30px;">
            <button class="btn primary" onclick="submitCase()" id="final-submit" disabled>
                üéØ FINALIZAR INVESTIGA√á√ÉO
            </button>
            <button class="btn" onclick="resetGame()" style="background: linear-gradient(45deg, #666, #888);">
                üîÑ Reiniciar Jogo
            </button>
        </div>
    </div>

    <div class="result-modal" id="resultModal">
        <div class="modal-content">
            <div class="badge-display" id="badge-emoji">üèÜ</div>
            <h2 id="result-title">CASO RESOLVIDO!</h2>
            <div id="result-content"></div>
            <div id="final-score"></div>
            <div id="performance-analysis"></div>
            <div style="margin-top: 30px;">
                <button class="btn primary" onclick="closeModal()">Fechar Relat√≥rio</button>
                <button class="btn" onclick="resetGame(); closeModal();">Jogar Novamente</button>
            </div>
        </div>
    </div>
    
</body>
</html>